<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reportes y Estad√≠sticas - Clinik Dent</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .reportes-container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 20px;
    }
    
    .tabs-container {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      border-bottom: 2px solid #e0e0e0;
    }
    
    .tab-button {
      padding: 12px 24px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      font-size: 16px;
      color: #666;
      transition: all 0.3s;
    }
    
    .tab-button:hover {
      color: #333;
      background: #f5f5f5;
    }
    
    .tab-button.active {
      color: #007bff;
      border-bottom-color: #007bff;
      font-weight: bold;
    }
    
    .tab-content {
      display: none;
      animation: fadeIn 0.3s;
    }
    
    .tab-content.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .filtros-card {
      background: white;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 25px;
    }
    
    .filtros-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
    }
    
    .form-group label {
      font-weight: 600;
      margin-bottom: 8px;
      color: #333;
      font-size: 14px;
    }
    
    .form-group input, .form-group select {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      transition: border-color 0.3s;
    }
    
    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #007bff;
    }
    
    .form-group input.error, .form-group select.error {
      border-color: #dc3545;
    }
    
    .form-group .error-message {
      color: #dc3545;
      font-size: 12px;
      margin-top: 4px;
      display: none;
    }
    
    .form-group.has-error .error-message {
      display: block;
    }
    
    .acciones-container {
      display: flex;
      gap: 15px;
      justify-content: flex-end;
      align-items: center;
    }
    
    .btn {
      padding: 12px 28px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 600;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-generar {
      background: #28a745;
      color: white;
    }
    
    .btn-generar:hover:not(:disabled) {
      background: #218838;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
    }
    
    .btn-descargar {
      background: #007bff;
      color: white;
    }
    
    .btn-descargar:hover:not(:disabled) {
      background: #0056b3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    }
    
    .btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      opacity: 0.6;
    }
    
    .btn-limpiar {
      background: #6c757d;
      color: white;
    }
    
    .btn-limpiar:hover {
      background: #5a6268;
    }
    
    .resultados-card {
      background: white;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: none;
    }
    
    .resultados-card.visible {
      display: block;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }
    
    .stat-card.green {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    }
    
    .stat-card.orange {
      background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
    }
    
    .stat-card.blue {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .stat-card h3 {
      font-size: 14px;
      margin-bottom: 10px;
      opacity: 0.9;
    }
    
    .stat-card .value {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .tabla-reportes {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    
    .tabla-reportes thead {
      background: #343a40;
      color: white;
    }
    
    .tabla-reportes th,
    .tabla-reportes td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    
    .tabla-reportes tbody tr:hover {
      background: #f8f9fa;
    }
    
    .badge {
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .badge-success {
      background: #d4edda;
      color: #155724;
    }
    
    .badge-warning {
      background: #fff3cd;
      color: #856404;
    }
    
    .badge-danger {
      background: #f8d7da;
      color: #721c24;
    }
    
    .badge-info {
      background: #d1ecf1;
      color: #0c5460;
    }
    
    .loading {
      text-align: center;
      padding: 40px;
      color: #666;
    }
    
    .loading::after {
      content: '...';
      animation: dots 1.5s infinite;
    }
    
    @keyframes dots {
      0%, 20% { content: '.'; }
      40% { content: '..'; }
      60%, 100% { content: '...'; }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo"><img src="images/logo.jpg" alt="Logo" style="height:40px;vertical-align:middle;"> <span style="vertical-align:middle;">Clinik Dent</span></div>
    <ul class="nav-links">
      <li><a href="dashboard-admin.html">Inicio</a></li>
      <li><a href="citas.html">Citas</a></li>
      <li><a href="tratamientos.html">Tratamientos</a></li>
      <li><a href="reportes.html" class="active">Reportes</a></li>
      <li><a href="inventario.html">Inventario</a></li>
      <li><a href="agenda.html">Agenda</a></li>
      <li><a href="perfil.html">Mi Perfil</a></li>
      <li><a href="index.html">Cerrar Sesi√≥n</a></li>
    </ul>
  </nav>

  <div class="reportes-container">
    <h2>üìä Reportes y Estad√≠sticas</h2>

    <!-- Pesta√±as de navegaci√≥n -->
    <div class="tabs-container">
      <button class="tab-button active" data-tab="financiero">üí∞ Financiero</button>
      <button class="tab-button" data-tab="operativo">üìã Operativo</button>
      <button class="tab-button" data-tab="cancelaciones">‚ùå Cancelaciones</button>
      <button class="tab-button" data-tab="actividad">üë• Actividad Usuarios</button>
      <button class="tab-button" data-tab="tratamientos">ü¶∑ Seguimiento Tratamientos</button>
    </div>

    <!-- TAB: Reporte Financiero -->
    <div id="tab-financiero" class="tab-content active">
      <div class="filtros-card">
        <h3>An√°lisis de Ingresos</h3>
        <div class="filtros-grid">
          <div class="form-group">
            <label for="fin-fecha-inicio">Fecha Inicio *</label>
            <input type="date" id="fin-fecha-inicio" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="fin-fecha-fin">Fecha Fin *</label>
            <input type="date" id="fin-fecha-fin" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="fin-metodo-pago">M√©todo de Pago</label>
            <select id="fin-metodo-pago">
              <option value="">Todos</option>
              <option value="efectivo">Efectivo</option>
              <option value="tarjeta">Tarjeta</option>
              <option value="transferencia">Transferencia</option>
            </select>
          </div>
        </div>
        <div class="acciones-container">
          <button class="btn btn-limpiar" onclick="limpiarFiltros('financiero')">üîÑ Limpiar</button>
          <button class="btn btn-generar" onclick="generarReporte('financiero')">üìä Generar Reporte</button>
          <button class="btn btn-descargar" id="btn-descargar-financiero" disabled onclick="descargarExcel('financiero')">
            üì• Descargar Excel
          </button>
        </div>
      </div>
      <div id="resultados-financiero" class="resultados-card"></div>
    </div>

    <!-- TAB: Reporte Operativo -->
    <div id="tab-operativo" class="tab-content">
      <div class="filtros-card">
        <h3>Citas Agendadas</h3>
        <div class="filtros-grid">
          <div class="form-group">
            <label for="op-fecha-inicio">Fecha Inicio *</label>
            <input type="date" id="op-fecha-inicio" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="op-fecha-fin">Fecha Fin *</label>
            <input type="date" id="op-fecha-fin" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="op-estado">Estado</label>
            <select id="op-estado">
              <option value="">Todos</option>
              <option value="programada">Programada</option>
              <option value="completada">Completada</option>
              <option value="confirmada">Confirmada</option>
            </select>
          </div>
          <div class="form-group">
            <label for="op-odontologo">Odont√≥logo</label>
            <select id="op-odontologo">
              <option value="">Todos</option>
            </select>
          </div>
        </div>
        <div class="acciones-container">
          <button class="btn btn-limpiar" onclick="limpiarFiltros('operativo')">üîÑ Limpiar</button>
          <button class="btn btn-generar" onclick="generarReporte('operativo')">üìä Generar Reporte</button>
          <button class="btn btn-descargar" id="btn-descargar-operativo" disabled onclick="descargarExcel('operativo')">
            üì• Descargar Excel
          </button>
        </div>
      </div>
      <div id="resultados-operativo" class="resultados-card"></div>
    </div>

    <!-- TAB: Cancelaciones -->
    <div id="tab-cancelaciones" class="tab-content">
      <div class="filtros-card">
        <h3>An√°lisis de Cancelaciones</h3>
        <div class="filtros-grid">
          <div class="form-group">
            <label for="canc-fecha-inicio">Fecha Inicio *</label>
            <input type="date" id="canc-fecha-inicio" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="canc-fecha-fin">Fecha Fin *</label>
            <input type="date" id="canc-fecha-fin" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="canc-motivo">Motivo</label>
            <select id="canc-motivo">
              <option value="">Todos</option>
              <option value="paciente">Por Paciente</option>
              <option value="clinica">Por Cl√≠nica</option>
              <option value="emergencia">Emergencia</option>
              <option value="otro">Otro</option>
            </select>
          </div>
        </div>
        <div class="acciones-container">
          <button class="btn btn-limpiar" onclick="limpiarFiltros('cancelaciones')">üîÑ Limpiar</button>
          <button class="btn btn-generar" onclick="generarReporte('cancelaciones')">üìä Generar Reporte</button>
          <button class="btn btn-descargar" id="btn-descargar-cancelaciones" disabled onclick="descargarExcel('cancelaciones')">
            üì• Descargar Excel
          </button>
        </div>
      </div>
      <div id="resultados-cancelaciones" class="resultados-card"></div>
    </div>

    <!-- TAB: Actividad Usuarios -->
    <div id="tab-actividad" class="tab-content">
      <div class="filtros-card">
        <h3>Registro de Actividad de Usuarios</h3>
        <div class="filtros-grid">
          <div class="form-group">
            <label for="act-fecha-inicio">Fecha Inicio *</label>
            <input type="date" id="act-fecha-inicio" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="act-fecha-fin">Fecha Fin *</label>
            <input type="date" id="act-fecha-fin" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="act-usuario">Usuario</label>
            <select id="act-usuario">
              <option value="">Todos</option>
            </select>
          </div>
          <div class="form-group">
            <label for="act-tipo-accion">Tipo de Acci√≥n</label>
            <select id="act-tipo-accion">
              <option value="">Todas</option>
              <option value="login">Inicio de sesi√≥n</option>
              <option value="crear">Crear registro</option>
              <option value="editar">Editar registro</option>
              <option value="eliminar">Eliminar registro</option>
            </select>
          </div>
        </div>
        <div class="acciones-container">
          <button class="btn btn-limpiar" onclick="limpiarFiltros('actividad')">üîÑ Limpiar</button>
          <button class="btn btn-generar" onclick="generarReporte('actividad')">üìä Generar Reporte</button>
          <button class="btn btn-descargar" id="btn-descargar-actividad" disabled onclick="descargarExcel('actividad')">
            üì• Descargar Excel
          </button>
        </div>
      </div>
      <div id="resultados-actividad" class="resultados-card"></div>
    </div>

    <!-- TAB: Seguimiento Tratamientos -->
    <div id="tab-tratamientos" class="tab-content">
      <div class="filtros-card">
        <h3>Seguimiento de Tratamientos</h3>
        <div class="filtros-grid">
          <div class="form-group">
            <label for="trat-fecha-inicio">Fecha Inicio *</label>
            <input type="date" id="trat-fecha-inicio" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="trat-fecha-fin">Fecha Fin *</label>
            <input type="date" id="trat-fecha-fin" required>
            <span class="error-message">Este campo es requerido</span>
          </div>
          <div class="form-group">
            <label for="trat-estado">Estado</label>
            <select id="trat-estado">
              <option value="">Todos</option>
              <option value="en_progreso">En Progreso</option>
              <option value="completado">Completado</option>
              <option value="pausado">Pausado</option>
              <option value="cancelado">Cancelado</option>
            </select>
          </div>
          <div class="form-group">
            <label for="trat-tipo">Tipo de Tratamiento</label>
            <select id="trat-tipo">
              <option value="">Todos</option>
              <option value="limpieza">Limpieza Dental</option>
              <option value="ortodoncia">Ortodoncia</option>
              <option value="endodoncia">Endodoncia</option>
              <option value="implante">Implantes</option>
              <option value="estetica">Est√©tica Dental</option>
            </select>
          </div>
        </div>
        <div class="acciones-container">
          <button class="btn btn-limpiar" onclick="limpiarFiltros('tratamientos')">üîÑ Limpiar</button>
          <button class="btn btn-generar" onclick="generarReporte('tratamientos')">üìä Generar Reporte</button>
          <button class="btn btn-descargar" id="btn-descargar-tratamientos" disabled onclick="descargarExcel('tratamientos')">
            üì• Descargar Excel
          </button>
        </div>
      </div>
      <div id="resultados-tratamientos" class="resultados-card"></div>
    </div>
  </div>

  <script src="js/reportes.js"></script>
</body>
</html>
